<div id="adventure-profile">
  <div id="adventure-content">
    <app-header></app-header>
    
    <div [style.height]="500">
      <mat-carousel *ngIf="isLoaded"
      timings="250ms ease-in" [autoplay]=true [interval] = "5000" color="accent" maxWidth="auto" [proportion]= "40" [slides] = "images.length"
      [loop]=true [hideArrows]="false" [hideIndicators]="true" [useKeyboard]="true" [useMouseWheel]="false" orientation="ltr">
      <mat-carousel-slide
        #matCarouselSlide
        *ngFor="let sl of images;"
        [image]=sl.imageUrl
        overlayColor="#00000040"
        [hideOverlay]="false">
      </mat-carousel-slide>
    </mat-carousel>
      <button mat-raised-button (click)="imageAdded(fishingAdventure.id)" class="btn add-picture-button">Dodaj sliku</button>
      <!--input type="file" accept="image/*" style="display:none;border:none;"  #addImage/-->
    </div>
    <div class="adventure-container">
      <div class="d-flex flex-column adventure-view-title-container">
        <div class="d-flex flex-row">
          <div class="d-flex left align-items-center">
            <span class="adventure-view-adventure-name ms-3 display-6">
              {{fishingAdventure.name}}
            </span>
          </div>
          <div class="d-flex right align-items-center justify-content-end">
            <button mat-raised-button (click)="editAdventureDialog()" class="btn add-action-button">Izmeni avanturu</button>
          </div>
        </div>
        <div class="d-flex flex-row">
          <a class="red-link ms-3 mt-3" (click)="showMap()">{{fishingAdventure.address.street}},
            {{fishingAdventure.address.city}}, {{fishingAdventure.address.state}}</a>
        </div>
        <div class="d-flex flex-row mt-5">
          <div class="d-flex flex-column ms-3 filter-sort-container">
            <span class="basic-title text-center">Informacije</span>
            <div class="form-check">
              <label class="form-check-label wrap" for="flexCheckShowAll">
                Maksimalno osoba: {{fishingAdventure.capacity}}
              </label>
            </div>
            <div class="form-check">
              <label class="form-check-label" for="flexCheckBarbecue">
                Cena po satu: {{fishingAdventure.pricePerHour}}din
              </label>
            </div>
            <div class="form-check">
              <label class="form-check-label wrap" for="flexCheckItalian">
                Otkazivanje: {{fishingAdventure.cancellationFee}}% rezervacije
              </label>
            </div>
            <div class="form-check">
              <label class="form-check-label wrap" for="flexCheckChinese">
                Oprema: <br> {{fishingAdventure.fishingEquipment}}
              </label>
            </div>
            <div class="form-check">
              <label class="form-check-label wrap" for="flexCheckChinese">
                Pravila ponasanja: <br> {{fishingAdventure.behaviourRules}}
              </label>
            </div>
            <div class="form-check">
              <label class="form-check-label wrap" for="flexCheckChinese">
                Dodatne usluge: <br>
                <li *ngFor="let service of additionalServices">
                  {{service.name}} = {{service.price}}din <br>
                </li>
              </label>
            </div>
            <div class="form-check last-form-check">
              <a class="reservations-link" (click)="showReservationsDialog(fishingAdventure.id)"><u>Vidi rezervacije</u></a>
            </div>
          </div>
          <div class="d-flex ms-5 flex-column">
            {{fishingAdventure.promoDescription}}
          </div>
          <div class="d-flex flex-column ms-3 filter-sort-container">
            <span class="basic-title text-center">Instruktor</span>
            <div class="form-check">
              <label class="form-check-label wrap" for="flexCheckShowAll">
                Ime: {{user.firstName}}
              </label>
            </div>
            <div class="form-check">
              <label class="form-check-label" for="flexCheckBarbecue">
                Prezime: {{user.lastName}}
              </label>
            </div>
            <div class="form-check last-form-check">
              <label class="form-check-label wrap" for="flexCheckChinese">
                Opis: <br> {{user.personalDescription}}
              </label>
            </div>
          </div>
        </div>
        <div>
          <div>
            <br> <label style="font-size: 30px; font-weight: 500;" class="ms-3" >Lokacija:</label>
          </div>
          <agm-map [latitude]="fishingAdventure.address.latitude" [longitude]="fishingAdventure.address.longitude">
            <agm-marker [latitude]="fishingAdventure.address.latitude" [longitude]="fishingAdventure.address.longitude"></agm-marker>
          </agm-map>
        </div>
        <br>
        <div class="d-flex flex-column">
          <div class="d-flex flex-row">
            <div class="d-flex left align-items-center">
              <span style="font-size: 30px; font-weight: 500;" class=" ms-3">
                Akcije
              </span>
            </div>
            <div class="d-flex right align-items-center justify-content-end">
              <button mat-raised-button (click)="addActionDialog()" class="btn add-action-button">Dodaj akciju</button>
            </div>
          </div>
          <div class="col-12 d-flex flex-row">
            <div id="carouselExampleIndicators2" class="carousel slide" data-ride="carousel">
              <div class="carousel-inner">
                <div class="carousel-item active">
                  <div class="row">
                    <div class="action-card mb-3" *ngFor="let action of this.actions;let i = index">
                      <div class="card">
                        <div class="card-body">
                          <h4 class="card-title">Početak: {{ action.startDate | date:'dd/MM/yyyy HH:mm:ss'}}</h4>
                          <h4 class="card-title">Kraj: {{ action.endDate | date:'dd/MM/yyyy HH:mm:ss'}}</h4>
                          <p class="card-text">Broj osoba: {{action.maxGuests}}</p>
                          <p class="card-text">Dodatne usluge:</p>
                          <li *ngFor="let service of action.additionalServices">
                            {{service.name}} = {{service.price}}din <br>
                          </li>
                          <p class="card-text">Cena: {{action.price}} din</p>
                          <p class="card-text">Ušteda: {{savings[i]}} din</p>
                        </div>
                        <div class="d-flex right me-3 mb-3 align-items-center justify-content-end">
                          <button type="button" class="btn add-action-button"
                            (click)="addActionDialog()">REZERVIŠI</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <app-footer></app-footer>
</div>